sudo: required

services:
 - docker

env:
  - version_alpine=1.0.0
  - version_adopt=0.0.1

jobs:
 include:
  - stage: build and push docker.openjdk-alpine image
    script:
     - docker build -t klibio/io.klib.docker.openjdk.java:$version_alpine --file ./Dockerfile-alpine.txt . 
     - docker images ls -a
     - docker login -u $DCKUSR -p $DCKPW
     - docker push klibio/io.klib.docker.openjdk.java:$version_alpine
     - docker tag klibio/io.klib.docker.openjdk.java:$version_alpine klibio/io.klib.docker.openjdk.java:latest
     - docker push klibio/io.klib.docker.openjdk.java:latest
     - docker build -t klibio/io.klib.docker.adopt.java:$version_adopt --file ./Dockerfile-adoptopenjdk.txt . 
     - docker push klibio/io.klib.docker.adopt.java:$version_adopt
     - docker tag klibio/io.klib.docker.adopt.java:$version_adopt klibio/io.klib.docker.adopt.java:latest
     - docker push klibio/io.klib.docker.adopt.java:latest